<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Recycle Post Board</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles_post.css" rel="stylesheet" />
        <!-- Firebase part -->
        <script src="https://www.gstatic.com/firebasejs/8.4.0/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.4.0/firebase-analytics.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.4.0/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.4.0/firebase-firestore.js"></script>
        <script type="text/javascript">
            var firebaseConfig = {
              apiKey: "AIzaSyD6ncJWml82Xzk_dVYydIC8NzBUawuJb9E",
              authDomain: "se-termproject-team1.firebaseapp.com",
              projectId: "se-termproject-team1",
              storageBucket: "se-termproject-team1.appspot.com",
              messagingSenderId: "197301464509",
              appId: "1:197301464509:web:775de202359b76b06836d4"
            };

            // Initialize Firebase
            firebase.initializeApp(firebaseConfig);
            var db = firebase.firestore();
            firebase.auth().onAuthStateChanged(function(user) {
                if (user) {
                    var login = document.getElementById("login");
                    var logout = document.getElementById("logout");

                    login.style.display = 'none';
                    logout.style.display = 'block';
                }
                else {
                    var login = document.getElementById("login");
                    var logout = document.getElementById("logout");

                    login.style.display = 'block';
                    logout.style.display = 'none';
                }
            });

            var docRef = db.collection("Post").doc("PGDMtKrZhlEbZawJyxUx");
            docRef.get().then((doc) => {
                if (doc.exists) {
                    var title = document.getElementById("PostTitle");
                    var element = document.getElementById("Content");
                    var Date = document.getElementById("Date");
                    var Publisher = document.getElementById("Publisher");
                    document.getElementById("Image").src=doc.data().IMG;
                    // 요소의 콘텐츠를 변경합니다.
                    title.innerText = doc.data().Title;
                    element.innerText = doc.data().Content;
                    Date.innerText = doc.data().Date;
                    Publisher.innerText = doc.data().UID;

             } else {
                    // doc.data() will be undefined in this case
                    console.log("No such document!");
             }
            }).catch((error) => {
                console.log("Error getting document:", error);
            });

        </script>
    </head>
    <body>
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <div class="container">
                <a class="navbar-brand" href="index.html">Recyclude</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="index.html">Home</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="post.html">
                                Post Board
                                <span class="sr-only">(current)</span>
                            </a>
                        </li>
                        <li id="login" class="nav-item"><a class="nav-link" href="signin.html">Sign In</a></li>
                        <li id="logout" class="nav-item" style="display: none"><a class="nav-link">Sign Out</a></li>
                        <script>
                            var logout = document.getElementById("logout");
                            logout.onclick = function() {
                                firebase.auth().signOut();
                                window.location.reload();
                            }
                        </script>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- Page content-->
        <div class="container">
                    <!-- Title-->
                    <h1 id ="PostTitle" class="mt-4"></h1>
                    <!-- Author-->
                    <p id ="Publisher" class="lead">
                    </p>
                    <hr />
                    <!-- Date and time-->
                    <p id="Date"></p>
                    <hr />
                    <!-- Preview image-->
                    <img id="Image" class="img-fluid rounded" alt="..." />
                    <hr />
                    <p id="Content"></p>
                    <hr />
                    <!-- Comments form-->
                    <div class="card my-4">
                        <h5 class="card-header">Leave a Comment:</h5>
                        <div class="card-body">
                            <form>
                                <div class="form-group"><textarea class="form-control" rows="3"></textarea></div>
                                <button class="btn btn-primary" type="submit">Submit</button>
                            </form>
                        </div>
                    </div>
                    <!-- Single comment-->
                    <div class="media mb-4">
                        <div class="media-body">
                            <h5 class="mt-0">Commenter Name</h5>
                            Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin. Cras purus odio, vestibulum in vulputate at, tempus viverra turpis. Fusce condimentum nunc ac nisi vulputate fringilla. Donec lacinia congue felis in faucibus.
                        </div>
                    </div>
        </div>
        <!-- Footer-->
        <footer class="py-5 bg-dark">
            <div class="container"><p class="m-0 text-center text-white">Copyright &copy; Your Website 2021</p></div>
        </footer>
        <!-- Bootstrap core JS-->
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts_post.js"></script>
    </body>
</html>
